
////////////////////////////////////////////////////////////////////////////////
// CRM триггеры повт исп
//  
////////////////////////////////////////////////////////////////////////////////
#Область ПрограммныйИнтерфейс

// Вернуть обработку действия.
//
// Параметры:
//  Триггер	 - СправочникСсылка.CRM_Триггеры - Ссылка на триггер.
// 
// Возвращаемое значение:
//  ВнешняяОбработка - Обработка действия.
//
Функция ВернутьОбработкуДействия(Триггер) Экспорт
	ОбработкаПроверки = Триггер.Действие.ОбработкаДействия.Получить();
	ИмяВременногоФайла = ПолучитьИмяВременногоФайла("epf");
	ОбработкаПроверки.Записать(ИмяВременногоФайла);
	
	ПараметрыЗащиты = Новый("ОписаниеЗащитыОтОпасныхДействий"+"");
	ПараметрыЗащиты.ПредупреждатьОбОпасныхДействиях = ЛОЖЬ;                                            
	
	Данные = Новый ДвоичныеДанные(ИмяВременногоФайла);
	АдресХранилища = ПоместитьВоВременноеХранилище(Данные, Новый УникальныйИдентификатор());
	
	Обработка =  ВнешниеОбработки.Создать(ВнешниеОбработки.Подключить(АдресХранилища,,Ложь, ПараметрыЗащиты), Ложь);
	Возврат Обработка;
КонецФункции	

// Вернуть обработку условия.
//
// Параметры:
//  Триггер	 - СправочникСсылка.CRM_Триггеры - Ссылка на триггер. 
// 
// Возвращаемое значение:
//  ВнешняяОбработка  - Обработка условия.
//
Функция ВернутьОбработкуУсловия(Триггер) Экспорт
	ОбработкаПроверки = Триггер.УсловиеСрабатывания.ОбработкаПроверки.Получить();
	ИмяВременногоФайла = ПолучитьИмяВременногоФайла("epf");
	ОбработкаПроверки.Записать(ИмяВременногоФайла);
	
	ПараметрыЗащиты = Новый("ОписаниеЗащитыОтОпасныхДействий"+"");
	ПараметрыЗащиты.ПредупреждатьОбОпасныхДействиях = ЛОЖЬ;                                            
	
	Данные = Новый ДвоичныеДанные(ИмяВременногоФайла);
	АдресХранилища = ПоместитьВоВременноеХранилище(Данные, Новый УникальныйИдентификатор());
	
	Обработка =  ВнешниеОбработки.Создать(ВнешниеОбработки.Подключить(АдресХранилища,,Ложь, ПараметрыЗащиты), Ложь);
	Возврат Обработка;
КонецФункции

#КонецОбласти
