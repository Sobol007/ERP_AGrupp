#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ОбработчикиСобытий

Процедура ПередЗаписью(Отказ)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;

	ОбновлениеИнформационнойБазы.ПроверитьОбъектОбработан(ЭтотОбъект);

КонецПроцедуры

Процедура ПриЗаписи(Отказ)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
КонецПроцедуры

Процедура ПриКопировании(ОбъектКопирования)
	
	Ответственный = Неопределено;
	
КонецПроцедуры

Процедура ОбработкаЗаполнения(ДанныеЗаполнения, ТекстЗаполнения, СтандартнаяОбработка)
	
	Если НЕ ЭтоГруппа Тогда
		Пользователь  = Пользователи.ТекущийПользователь();
		Ответственный = CRM_ОбщегоНазначенияПовтИсп.ПолучитьЗначениеНастройки("ОсновнойОтветственный");
		Если Не ЗначениеЗаполнено(Ответственный) Тогда
			Ответственный = Пользователь;
		КонецЕсли;

		ЗначениеНастройки = Пользователи.ТекущийПользователь().Подразделение;
		Если ЗначениеЗаполнено(ЗначениеНастройки) Тогда
			Подразделение = ЗначениеНастройки;
		Иначе
			Подразделение = CRM_ОбщегоНазначенияСервер.ПолучитьПредопределенноеПодразделение();
		КонецЕсли;
	КонецЕсли;

КонецПроцедуры

#КонецОбласти

#КонецЕсли

