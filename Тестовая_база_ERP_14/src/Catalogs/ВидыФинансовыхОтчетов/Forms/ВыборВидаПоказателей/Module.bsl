
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)

	Если Параметры.Свойство("АвтоТест") Тогда // Возврат при получении формы для анализа.
		Возврат;
	КонецЕсли;
	
	ВидПоказателей = Параметры.ВидПоказателей;
	
	Элементы.ГруппаМеждународный.Доступность = Параметры.ЕстьПоказателиМУ;
	Элементы.ГруппаРегламентированный.Доступность = Параметры.ЕстьПоказателиБУ;
	
	#Область ПодписиРегламентированныйУчет
	ВестиУУ = ПолучитьФункциональнуюОпцию("ВестиУУНаПланеСчетовХозрасчетный");
	ВестиФО = ПолучитьФункциональнуюОпцию("ВестиУчетНаПланеСчетовХозрасчетныйВВалютеФинОтчетности");
	Если ВестиУУ И ВестиФО Тогда
		Элементы.ПояснениеРегламентированный.Заголовок =
			НСтр("ru = 'Использовать показатели только бухгалтерского плана счетов.
						|В качестве данных для показателей могут использоваться данные бухгалтерского или управленческого учета.
						|Выбор типа данных происходит при формировании отчета.';
						|en = 'Use indicators of the bookkeeping chart of accounts only.
						|Data of bookkeeping and management accounting can be used as indicator data.
						|Data type is selected while generating the report.'");
	ИначеЕсли ВестиУУ И НЕ ВестиФО Тогда
		Элементы.ПояснениеРегламентированный.Заголовок =
			НСтр("ru = 'Использовать показатели только бухгалтерского плана счетов.
						|В качестве данных для показателей могут использоваться данные бухгалтерского или управленческого учета или в валюте финансовой отчетности.
						|Выбор типа данных происходит при формировании отчета.';
						|en = 'Use indicators of the bookkeeping chart of accounts only.
						|Data of bookkeeping and management accounting or in financial reporting currency can be used as indicator data.
						|Data type is selected while generating the report.'");
	ИначеЕсли НЕ ВестиУУ И ВестиФО Тогда
		Элементы.ПояснениеРегламентированный.Заголовок =
			НСтр("ru = 'Использовать показатели только бухгалтерского плана счетов.
						|В качестве данных для показателей могут использоваться данные бухгалтерского учета или в валюте финансовой отчетности.
						|Выбор типа данных происходит при формировании отчета.';
						|en = 'Use indicators of the bookkeeping chart of accounts only.
						|Data of bookkeeping or in financial reporting currency can be used as indicator data.
						|Data type is selected while generating the report.'");
	ИначеЕсли НЕ ВестиУУ И НЕ ВестиФО Тогда
		Элементы.ПояснениеРегламентированный.Заголовок =
			НСтр("ru = 'Использовать показатели только бухгалтерского плана счетов.';
				|en = 'Use indicators of the accounting chart of accounts only.'");
	КонецЕсли;
	#КонецОбласти

	#Область ПодписиМеждународныйИРегламентированныйРежим
	ВалютаРегл = Константы.ВалютаРегламентированногоУчета.Получить();
	ВалютаМУ = МеждународнаяОтчетностьВызовСервера.УчетнаяВалюта();
	ВалютаОК = ВалютаРегл = ВалютаМУ.Функциональная ИЛИ ВалютаРегл = ВалютаМУ.Представления;
	Если ВалютаРегл = ВалютаМУ.Функциональная Тогда
		Элементы.ПояснениеСмешанный.Заголовок =
			НСтр("ru = 'Использовать показатели международного и бухгалтерского планов счетов совместно.
						|Отчет формируется в функциональной валюте для международного плана счетов
						|и валюте регламентированного учета для бухгалтерского плана счетов.';
						|en = 'Use indicators of international and accounting charts of accounts together.
						|Report is generated in functional currency for international chart of accounts
						|and compliance accounting currency for accounting chart of accounts.'");
	ИначеЕсли ВалютаРегл = ВалютаМУ.Представления Тогда
		Элементы.ПояснениеСмешанный.Заголовок =
			НСтр("ru = 'Использовать показатели международного и бухгалтерского планов счетов совместно.
						|Отчет формируется в валюте представления для международного плана счетов
						|и валюте регламентированного учета для бухгалтерского плана счетов.';
						|en = 'Use indicators of international and accounting charts of accounts together.
						|Report is generated in reporting currency for international chart of accounts
						|and compliance accounting currency for accounting chart of accounts.'");
	Иначе//Если НЕ ВалютаОК Тогда
		Элементы.ПояснениеСмешанный.Заголовок =
			НСтр("ru = 'Использовать показатели международного и бухгалтерского планов счетов совместно.
						|Совместное использование показателей возможно при совпадении валюты регламентированного учета
						|и одной из валют международного учета (функциональной валюты или валюты представления).';
						|en = 'Use indicators of international and accounting charts of accounts together.
						|You can use the indicators together when compliance accounting currency matches
						|one of the international accounting currencies (functional currency or reporting currency).'");
		Шаблон = НСтр("ru = 'Валюта регл. учета %1; Функциональная валюта %2; Валюта представления %3.
							|Совместное использование показателей недоступно.';
							|en = 'Compl. accounting currency %1; Functional currency %2; Reporting currency %3.
							|You cannot use indicators simultaneously.'");
		Элементы.ПояснениеПочему.Заголовок = СтрШаблон(Шаблон, ВалютаРегл, ВалютаМУ.Функциональная,  ВалютаМУ.Представления);
		Элементы.ГруппаСмешанный.Доступность = Ложь;
	КонецЕсли;
	#КонецОбласти
	
	Текст = ?(ПустаяСтрока(Элементы.ПояснениеПочему.Заголовок),"",Элементы.ПояснениеПочему.Заголовок + Символы.ПС);
	Если Параметры.ЕстьПоказателиМУ И Параметры.ЕстьПоказателиБУ Тогда
		Элементы.ГруппаМеждународный.Доступность = Ложь;
		Элементы.ГруппаРегламентированный.Доступность = Ложь;
		Текст = Текст + НСтр("ru = 'Текущий отчет содержит показатели международного и регламентированного плана счетов.
							|Использование показателей только одного вида недоступно.';
							|en = 'The current report contains indicators of international and compliance chart of accounts.
							|Cannot use indicators of only one kind.'");
		
	ИначеЕсли Параметры.ЕстьПоказателиМУ И НЕ Параметры.ЕстьПоказателиБУ Тогда
		Текст = Текст + НСтр("ru = 'Текущий отчет содержит показатели только международного плана счетов.';
							|en = 'The current report contains indicators of international chart of accounts only.'");
		
	ИначеЕсли НЕ Параметры.ЕстьПоказателиМУ И Параметры.ЕстьПоказателиБУ Тогда
		Текст = Текст + НСтр("ru = 'Текущий отчет содержит показатели только регламентированного плана счетов.';
							|en = 'The current report contains indicators of compliance chart of accounts only.'");
		
	ИначеЕсли ВалютаОК Тогда
		Элементы.ГруппаМеждународный.Доступность = Истина;
		Элементы.ГруппаРегламентированный.Доступность = Истина;
		Элементы.ГруппаКомментарийПочему.Видимость = Ложь;
		
	КонецЕсли;
	Элементы.ПояснениеПочему.Заголовок = Текст;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ВыбратьВидПоказателей(Команда)
	
	Закрыть(ВидПоказателей);
	
КонецПроцедуры

#КонецОбласти
